import{m as b,n as T,o as k,p as P,q as F,r as D,t as R}from"./chunk-SCRDPGZD.js";import{$ as u,Ba as f,G as C,Ka as z,L as d,La as p,Ma as B,Na as O,Oa as x,Pa as s,Q as e,Qa as o,R as a,Ra as i,Va as H,Xa as g,Za as r,a as M,b as L,bb as S,db as m,eb as A,ib as y,oa as n}from"./chunk-FWEVMUGZ.js";var V=class h{saveTodosToLocalStorage(l){try{let t=JSON.stringify(l);localStorage.setItem("TODOS",t)}catch(t){console.error("Failed to save todos to localStorage:",t)}}loadTodosFromLocalStorage(){try{let l=localStorage.getItem("TODOS");return l?JSON.parse(l):[]}catch(l){return console.error("Failed to load todos from localStorage:",l),[]}}createTodo(l,t){let c={id:new Date().toISOString(),title:t,isCompleted:!1};return l.unshift(c),this.saveTodosToLocalStorage(l),c}updateTodo(l,t,c){let v=l.findIndex(w=>w.id===t);if(v===-1)throw new Error("Item not found");return l[v]=L(M({},l[v]),{title:c}),this.saveTodosToLocalStorage(l),l[v]}checkTodo(l,t,c){let v=l.findIndex(w=>w.id===t);if(v===-1)throw new Error("Item not found");return l[v]=L(M({},l[v]),{isCompleted:c}),this.saveTodosToLocalStorage(l),l[v]}deleteTodo(l,t){let c=l.findIndex(w=>w.id===t);if(c===-1)throw new Error("Item not found");let v=l.splice(c,1);return this.saveTodosToLocalStorage(l),v[0]}static \u0275fac=function(t){return new(t||h)};static \u0275prov=C({token:h,factory:h.\u0275fac})};var E='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8z"></path></svg>';var W=(h,l)=>l.id;function U(h,l){if(h&1){let t=H();s(0,"label",4)(1,"input",7),g("input",function(v){e(t);let w=r(2);return a(w.filtertext.set(v.target.value))}),o()()}if(h&2){let t=r(2);n(),x("value",t.filtertext())}}function G(h,l){if(h&1){let t=H();s(0,"button",8),g("click",function(){e(t);let v=r(2);return a(v.currentMode.set(v.Modes.search))}),i(1,"ng-icon",9),o(),s(2,"button",8),g("click",function(){e(t);let v=r(2);return a(v.currentMode.set(v.Modes.write))}),i(3,"ng-icon",10),o(),s(4,"button",8),g("click",function(){e(t);let v=r(2);return a(v.currentMode.set(v.Modes.delete))}),i(5,"ng-icon",11),o()}}function K(h,l){if(h&1){let t=H();s(0,"button",8),g("click",function(){e(t);let v=r(2);return v.currentMode.set(v.Modes.default),a(v.filtertext.set(""))}),i(1,"ng-icon",12),o()}}function j(h,l){if(h&1&&(s(0,"div",2),z(1,U,2,1,"label",4),s(2,"span",5),z(3,G,6,0)(4,K,2,0,"button",6),o()()),h&2){let t=r();n(),p(t.currentMode()===t.Modes.delete||t.currentMode()===t.Modes.search?1:-1),n(2),p(t.currentMode()===t.Modes.default?3:4)}}function Q(h,l){if(h&1){let t=H();s(0,"form",13),g("submit",function(v){e(t);let w=r();return a(w.onNewTodoSubmit(v))}),s(1,"label",14)(2,"input",15),g("input",function(v){e(t);let w=r();return a(w.newTodoInputText.set(v.target.value))}),o()(),s(3,"button",16),g("click",function(){e(t);let v=r();return a(v.currentMode.set(v.Modes.default))}),i(4,"ng-icon",17),o(),s(5,"button",18),i(6,"ng-icon",19),o()()}if(h&2){let t=r();n(2),x("value",t.newTodoInputText()),n(3),x("disabled",t.newTodoInputText().length===0)}}function q(h,l){if(h&1){let t=H();s(0,"button",25),g("click",function(){e(t);let v=r(2).$implicit,w=r();return a(w.deleteTodo(v.id))}),i(1,"ng-icon",11),o()}}function J(h,l){if(h&1){let t=H();s(0,"li",20),z(1,q,2,0,"button",21),s(2,"label",22)(3,"input",23),g("change",function(v){e(t);let w=r(2);return a(w.checkTodo(v))}),o(),s(4,"span",24),m(5),o()()()}if(h&2){let t=r().$implicit,c=r();n(),p(c.currentMode()===c.Modes.delete?1:-1),n(2),x("name",t.id)("checked",t.isCompleted)("disabled",c.currentMode()!==c.Modes.default),n(),S("line-through",t.isCompleted)("text-gray-400",t.isCompleted),n(),A(t.title)}}function Z(h,l){if(h&1&&z(0,J,6,9,"li",20),h&2){let t=l.$implicit,c=r();p(c.filtertext().length===0||t.title.toLowerCase().includes(c.filtertext().toLowerCase())?0:-1)}}var I=(v=>(v[v.default=0]="default",v[v.write=1]="write",v[v.delete=2]="delete",v[v.search=3]="search",v))(I||{}),_=class h{Modes=I;filtertext=u("");currentMode=u(0);todoService=d(V);todoItems=u([]);newTodoInputText=u("");createNewTodo(l){l.length!=0&&(this.todoService.createTodo(this.todoItems(),l),this.newTodoInputText.set(""),this.currentMode.set(0))}onNewTodoSubmit(l){l.preventDefault(),this.createNewTodo(this.newTodoInputText())}checkTodo(l){let t=l.target;this.todoService.checkTodo(this.todoItems(),t.name,t.checked)}deleteTodo(l){this.todoService.deleteTodo(this.todoItems(),l)}ngOnInit(){this.todoItems.set(this.todoService.loadTodosFromLocalStorage())}static \u0275fac=function(t){return new(t||h)};static \u0275cmp=f({type:h,selectors:[["app-todos"]],features:[y([V,b({matDeleteOutline:F,matAddCircleOutlineOutline:E,matCheck:k,matClose:P,matExitToApp:D,matSearch:R})])],decls:18,vars:2,consts:[[1,"text-center","font-bold","text-3xl"],[1,"max-w-md","mx-auto"],[1,"flex","justify-between","items-center","gap-4"],[1,"flex","items-center","gap-2","justify-between"],["for","filter",1,"inline-block","w-full"],[1,"flex","gap-2","justify-end"],["type","button",1,"text-black"],["id","filter","type","text","placeholder","Search",1,"m-0.5","w-full","border-gray-300","shadow-sm","sm:text-sm","bg-white","p-2","rounded",3,"input","value"],["type","button",1,"text-black",3,"click"],["name","matSearch","size","24","color","currentColor"],["name","matAddCircleOutlineOutline","size","24","color","currentColor"],["name","matDeleteOutline","size","24","color","currentColor"],["name","matExitToApp","size","24","color","currentColor"],[1,"flex","items-center","gap-2","justify-between",3,"submit"],["for","new-todo",1,"inline-block","w-full"],["id","new-todo","type","text","placeholder","New Todo",1,"m-0.5","w-full","border-gray-300","shadow-sm","sm:text-sm","bg-white","p-2","rounded",3,"input","value"],["type","button",1,"px-2","inline-flex","items-center","text-red-600",3,"click"],["name","matClose","size","24","color","currentColor"],["type","submit",1,"text-green-700","px-2","inline-flex","items-center","disabled:text-gray-400",3,"disabled"],["name","matCheck","size","24","color","currentColor"],[1,"flex","items-center","m-2"],["type","button",1,"text-red-800","inline-flex","items-center"],[1,"inline-flex","items-center","gap-3"],["type","checkbox",1,"size-5","rounded","border-gray-300","shadow-sm",3,"change","name","checked","disabled"],[1,"font-medium","text-gray-700"],["type","button",1,"text-red-800","inline-flex","items-center",3,"click"]],template:function(t,c){t&1&&(s(0,"h1",0),m(1,"Todos"),o(),s(2,"p"),m(3,"On day 2 I made this todos app. It loads existing todos from localstorage when the page loads. You can create, delete and filter todos."),o(),s(4,"p"),m(5,"When I update the todos array, the UI updates automatically."),o(),s(6,"p"),m(7,"I also installed ng-icons. Hopefully I don't get npm attacked."),o(),s(8,"p"),m(9,"This might be the first resource with more options than react I can see, but it took me forever to find a simple hamburger icon... I recommend material-icons (@ng-icons/material-icons)"),o(),s(10,"p"),m(11,"There's a LOT of conditional rendering going on in this page."),o(),s(12,"div",1),z(13,j,5,2,"div",2),z(14,Q,7,2,"form",3),s(15,"ul"),B(16,Z,1,1,null,null,W),o()()),t&2&&(n(13),p(c.currentMode()!==c.Modes.write?13:-1),n(),p(c.currentMode()===c.Modes.write?14:-1),n(2),O(c.todoItems()))},dependencies:[T],encapsulation:2})};export{_ as Todos};
